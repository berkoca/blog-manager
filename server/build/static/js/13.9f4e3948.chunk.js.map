{"version":3,"sources":["views/Posts.js"],"names":["Posts","useState","posts","setPosts","jwt","localStorage","getItem","useEffect","axios","get","then","response","data","catch","error","console","log","map","post","style","padding","display","width","alignItems","height","borderRadius","src","image_path","onClick","swal","Swal","mixin","customClass","cancelButton","fire","title","html","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","reverseButtons","result","isConfirmed","delete","id","headers","authorization","filter","x","deletePost","className","cursor","color","size","dangerouslySetInnerHTML","__html","content","category_tags","length","category_tag","href","target"],"mappings":"qRA0FeA,UApFD,WACZ,MAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KAEMC,EAAMC,aAAaC,QAAQ,OA0CjC,OARAC,qBAAU,WACRC,IAAMC,IAAI,sCACPC,MAAK,SAAAC,GACAA,GAAYA,EAASC,MAAQD,EAASC,KAAKA,MAC7CT,EAASQ,EAASC,KAAKA,SAExBC,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAIF,QAC/B,IAED,8BACGZ,EAAMe,KAAI,SAAAC,GACT,OACE,cAAC,IAAD,CAAoBC,MAAO,CAAEC,QAAS,QAAtC,SACE,sBAAKD,MAAO,CAAEE,QAAS,QAAvB,UACE,qBAAKF,MAAO,CAAEG,MAAO,OAArB,SACE,qBAAKH,MAAO,CAAEE,QAAS,OAAQE,WAAY,SAAUC,OAAQ,QAA7D,SACE,qBAAKL,MAAO,CAAEG,MAAO,OAAQG,aAAc,OAASC,IAAG,0CAAqCR,EAAKS,kBAGrG,sBAAKR,MAAO,CAAEG,MAAO,OAArB,UACE,sBAAMM,QAAS,kBApDV,SAACV,GAClB,IAAMW,EAAOC,IAAKC,MAAM,CACtBC,YAAa,CACXC,aAAc,UAIlBJ,EAAKK,KAAK,CACRC,MAAO,gBACPC,KAAK,uBAAD,OAAyBlB,EAAKiB,MAA9B,8BACJE,kBAAkB,EAClBC,mBAAoB,UACpBC,kBAAmB,OACnBC,kBAAmB,kBACnBC,gBAAgB,IACf/B,MAAK,SAACgC,GACHA,EAAOC,aACTnC,IAAMoC,OAAN,0CAAgD1B,EAAK2B,IAAM,CAAEC,QAAS,CAAEC,cAAc,UAAD,OAAY3C,MAC9FM,MAAK,SAAAC,GACJkB,EAAKK,KACH,WADF,8BAEyBhB,EAAKiB,MAF9B,2BAGE,WAEFhC,EAASD,EAAM8C,QAAO,SAAAC,GAAC,OAAIA,EAAEJ,KAAO3B,EAAK2B,UACxChC,OAAM,SAAAC,GACPC,QAAQC,IAAIF,EAAMH,gBA0BOuC,CAAWhC,IAAOiC,UAAU,mCAAmChC,MAAO,CAAEiC,OAAQ,WAArG,SACE,cAAC,IAAD,CAAQC,MAAM,UAAUC,KAAM,OAEhC,cAAC,IAAD,UACE,cAAC,IAAD,UAAYpC,EAAKiB,UAEnB,eAAC,IAAD,WACE,cAAC,IAAD,CAAUoB,wBAAyB,CAAEC,OAAQtC,EAAKuC,WAClD,cAAC,IAAD,UACGvC,EAAKwC,cAAcC,OAASzC,EAAKwC,cAAczC,KAAI,SAAA2C,GAClD,OACE,cAAC,IAAD,CAA6BC,KAAK,GAAGC,OAAO,SAA5C,SACGF,GADYA,MAId,eAvBJ1C,EAAK2B","file":"static/js/13.9f4e3948.chunk.js","sourcesContent":["import { Card, CardHeader, CardBody, CardTitle, CardText, CardLink } from 'reactstrap'\r\nimport { useEffect, useState } from 'react'\r\nimport axios from \"axios\"\r\nimport { Trash2 } from \"react-feather\"\r\nimport Swal from \"sweetalert2\"\r\n\r\nconst Posts = () => {\r\n  const [posts, setPosts] = useState([])\r\n\r\n  const jwt = localStorage.getItem(\"jwt\")\r\n\r\n  const deletePost = (post) => {\r\n    const swal = Swal.mixin({\r\n      customClass: {\r\n        cancelButton: 'mr-1'\r\n      }\r\n    })\r\n\r\n    swal.fire({\r\n      title: \"Are You Sure?\",\r\n      html: `Post with title <b>\"${post.title}\"</b> is gonna be deleted.`,\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Yes, delete it!',\r\n      reverseButtons: true\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        axios.delete(`http://localhost:3000/api/posts/${post.id}`, { headers: { authorization: `Bearer ${jwt}` } })\r\n          .then(response => {\r\n            swal.fire(\r\n              'Deleted!',\r\n              `Post with title <b>\"${post.title}\"</b> has been deleted.`,\r\n              'success'\r\n            )\r\n            setPosts(posts.filter(x => x.id !== post.id))\r\n          }).catch(error => {\r\n            console.log(error.response)\r\n          })\r\n      }\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    axios.get(\"https://blog.berkoca.com/api/posts\")\r\n      .then(response => {\r\n        if (response && response.data && response.data.data) {\r\n          setPosts(response.data.data)\r\n        }\r\n      }).catch(error => console.log(error))\r\n  }, [])\r\n  return (\r\n    <div>\r\n      {posts.map(post => {\r\n        return (\r\n          <Card key={post.id} style={{ padding: \"15px\" }}>\r\n            <div style={{ display: \"flex\" }}>\r\n              <div style={{ width: \"20%\" }}>\r\n                <div style={{ display: \"flex\", alignItems: \"center\", height: \"100%\" }}>\r\n                  <img style={{ width: \"100%\", borderRadius: \"7px\" }} src={`https://blog.berkoca.com/public/${post.image_path}`}></img>\r\n                </div>\r\n              </div>\r\n              <div style={{ width: \"80%\" }}>\r\n                <span onClick={() => deletePost(post)} className='float-md-right d-none d-md-block' style={{ cursor: \"pointer\" }}>\r\n                  <Trash2 color='#ff6666' size={20} />\r\n                </span>\r\n                <CardHeader>\r\n                  <CardTitle>{post.title}</CardTitle>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <CardText dangerouslySetInnerHTML={{ __html: post.content }}></CardText>\r\n                  <CardText>\r\n                    {post.category_tags.length ? post.category_tags.map(category_tag => {\r\n                      return (\r\n                        <CardLink key={category_tag} href='' target='_blank'>\r\n                          {category_tag}\r\n                        </CardLink>\r\n                      )\r\n                    }) : \"\"}\r\n                  </CardText>\r\n                </CardBody>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Posts\r\n"],"sourceRoot":""}